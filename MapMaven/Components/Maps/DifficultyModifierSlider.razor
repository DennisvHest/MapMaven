@using System.Diagnostics;
@using MapMaven.Core.Services.Leaderboards.ScoreEstimation;

<MudSlider T="int"
           @bind-Value="difficultyModifier"
           @onmouseup="OnDifficultyAmplifierChanged"
           Min="-100"
           Max="100"
           Step="1"
           ValueLabel="true"
           Color="Color.Info" />

<MudChip Size="Size.Small" Class="mx-0">Difficulty: @(difficultyModifier >= 0 ? "+" : string.Empty)@difficultyModifier%</MudChip>

@code {
    int difficultyModifier = 0;

    [Inject]
    ScoreEstimationSettings ScoreEstimationSettings { get; set; }

    protected override void OnInitialized()
    {
        difficultyModifier = ScoreEstimationSettings.DifficultyModifierValue.Value;
    }

    void OnDifficultyAmplifierChanged()
    {
        Task.Run(() => ScoreEstimationSettings.DifficultyModifierValue.OnNext(difficultyModifier));
    }
}
